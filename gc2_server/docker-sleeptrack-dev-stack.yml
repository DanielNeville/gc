sleeptrack-dev-influxdb:
  environment:
    - LETSENCRYPT_EMAIL=luc.wastiaux@xsmail.com
    - LETSENCRYPT_HOST=db.dev.sleeptrack.io
    - VIRTUAL_HOST=db.dev.sleeptrack.io
    - VIRTUAL_PORT=8086
  image: 'tutum/influxdb:latest'
  ports:
    - '8083:8083'
    - '8086:8086'
  restart: always
  tags:
    - dev
    - sleeptrack
  volumes:
    - '/data:/influxdata'
sleeptrack-dev-letsencrypt:
  image: 'jrcs/letsencrypt-nginx-proxy-companion:latest'
  restart: always
  tags:
    - dev
    - sleeptrack
  volumes:
    - '/etc/nginx/certs:/etc/nginx/certs'
    - '/var/run/docker.sock:/var/run/docker.sock:ro'
  volumes_from:
    - sleeptrack-dev-nginx-proxy
sleeptrack-dev-nginx-proxy:
  environment:
    - 'DOCKER_HOST=unix:///var/run/docker.sock'
  image: 'jwilder/nginx-proxy:latest'
  ports:
    - '80:80'
    - '443:443'
  restart: always
  tags:
    - dev
    - sleeptrack
  volumes:
    - '/var/run/docker.sock:/var/run/docker.sock:ro'
    - '/etc/nginx/certs:/etc/nginx/certs:ro'
    - /etc/nginx/vhost.d
    - /usr/share/nginx/html
sleeptrack-dev-anaconda:
  environment:
    - LETSENCRYPT_EMAIL=luc.wastiaux@xsmail.com
    - LETSENCRYPT_HOST=notebook.dev.sleeptrack.io
    - VIRTUAL_HOST=notebook.dev.sleeptrack.io
  image: 'lucwastiaux/sleeptrack-anaconda:dev'
  ports:
    - '8888:8888'
  restart: always
  tags:
    - dev
    - sleeptrack
sleeptrack-dev-grafana:
  environment:
    - LETSENCRYPT_EMAIL=luc.wastiaux@xsmail.com
    - LETSENCRYPT_HOST=data.dev.sleeptrack.io
    - VIRTUAL_HOST=data.dev.sleeptrack.io
    - VIRTUAL_PORT=VIRTUAL_PORT
  image: 'grafana/grafana:latest'
  ports:
    - '3000:3000'
  restart: always
  tags:
    - dev
    - sleeptrack
sleeptrack-dev-gcdataserver:
  autoredeploy: true
  environment:
    - FB_CONFIG_FILE=/firebase_keys/sleeptrack-dev.json
    - FB_ROOT=sleeptrack-dev
    - SERVER_TYPE=gc_data_server
  image: 'lucwastiaux/sleeptrack-dev:dev'
  nickname: sleeptrack-dev-gcdataserver
  tags:
    - dev
    - sleeptrack
  volumes:
    - '/firebase_keys:/firebase_keys:ro'
sleeptrack-dev-gcserver:
  autoredeploy: true
  environment:
    - FB_CONFIG_FILE=/firebase_keys/sleeptrack-dev.json
    - FB_ROOT=sleeptrack-dev
    - SERVER_KEY=sg_dev
    - SERVER_TYPE=gc_server
  image: 'lucwastiaux/sleeptrack-dev:dev'
  nickname: sleeptrack-dev-gcserver
  ports:
    - '7001:7001'
  tags:
    - dev
    - sleeptrack
  volumes:
    - '/firebase_keys:/firebase_keys:ro'